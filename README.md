# QuantumStrike: Morpeh ECS Version

Высокопроизводительная стратегия в реальном времени (RTS), демонстрирующая применение современных архитектурных подходов в Unity с использованием фреймворка Morpeh ECS. Проект фокусируется на обработке большого количества игровых сущностей с сохранением оптимальной производительности.

## О Проекте

`QuantumStrike` — это прототип RTS-игры, разработанный для исследования и демонстрации высокопроизводительных игровых архитектур. Данная версия проекта является второй архитектурной фазой, представляющей собой развитие первоначальной концепции, реализованной на базе нативного Unity DOTS (Data-Oriented Technology Stack).

Проект успешно мигрировал с Unity DOTS на Morpeh ECS, преследуя цель оптимизировать процесс разработки и итерационный цикл, сохраняя при этом ключевые преимущества ECS: масштабируемость и высокую производительность для симуляции множества объектов.

## Контекст: От DOTS к Morpeh

Изначально проект был построен на Unity DOTS, что позволило достичь впечатляющих результатов в производительности благодаря использованию Job System и Burst Compiler для многопоточной обработки данных и оптимизации кода. Была создана оптимизированная ECS-архитектура, способная обрабатывать тысячи сущностей.

Однако, в процессе разработки, было принято стратегическое решение о переходе на фреймворк Morpeh ECS. Основные причины миграции:

*   Ускорение разработки: Morpeh предлагает более простой, интуитивный и удобный API по сравнению с нативным DOTS, что значительно сокращает время на написание и отладку нового кода.
*   Простота API: Снижение порога входа и повышение читаемости кода, делая разработку фич более быстрой.
*   Сохранение производительности: Несмотря на более высокоуровневый API, Morpeh спроектирован для работы с Job System и Burst Compiler, позволяя достигать производительности, сравнимой с нативным DOTS, при сохранении поддержки тысяч объектов.

Эта миграция подчеркивает способность адаптироваться к изменяющимся требованиям проекта, находя оптимальный баланс между производительностью и скоростью разработки, выбирая наиболее подходящие для текущего этапа технологические решения.

## Технологический Стек

Проект `QuantumStrikeMorpeh` разработан с использованием следующего стека технологий и принципов:

*   Unity: Основная игровая платформа. Версия Unity должна быть совместима с используемыми пакетами, включая Morpeh ECS.
*   C#: Язык программирования.
*   Morpeh ECS Framework: Центральный компонент архитектуры. Легковесный, высокопроизводительный и простой в использовании фреймворк для создания систем, основанных на принципах Entity Component System.
*   Data-Oriented Design (DOD): Архитектурный подход, ориентированный на организацию данных для эффективной обработки, что идеально сочетается с ECS и способствует оптимизации кэширования и параллелизации.
*   *PrimeTween:* Библиотека для создания плавных анимаций и твинов (используется опционально для визуальных эффектов, не для основной логики симуляции).
*   *Возможное использование:* UniTask (для асинхронного программирования), VContainer (для Dependency Injection) и других библиотек, способствующих чистоте и эффективности кода.

## Особенности Morpeh ECS в Проекте

Morpeh ECS сыграл ключевую роль в реализации проекта, предоставив следующие преимущества:

*   Более быстрый итерационный цикл: Простой API Morpeh позволяет быстрее добавлять и изменять игровую логику.
*   Меньший объем кода: Реализация систем на Morpeh требует меньше шаблонного кода по сравнению с нативным DOTS для многих задач.
*   Четкое разделение ответственностей: ECS-подход в Morpeh способствует чистому разделению данных (Components), поведения (Systems) и сущностей (Entities).
*   Высокая производительность: Фреймворк позволяет эффективно использовать многоядерные процессоры и обеспечивает производительность, необходимую для симуляции тысяч юнитов.

> "Morpeh обеспечивает более простой и интуитивный API по сравнению с нативным DOTS, значительно ускоряя процесс разработки новых функций, сохраняя при этом все ключевые преимущества ECS архитектуры: высокую производительность, масштабируемость и поддержку тысяч объектов на экране." - Из описания проекта.

## Реализованные Фичи

Проект включает реализацию базовых систем, типичных для RTS-игр, построенных на принципах ECS с использованием Morpeh:

*   Система Юнитов (Units): Управление основными игровыми сущностями, их создание, идентификация и базовые свойства. Реализовано через компоненты, описывающие тип юнита, его состояние и т.д.
*   Система Движения (Movement): Обработка перемещения юнитов. Использует компоненты для хранения целевой позиции, скорости, текущего положения и логики навигации, обновляемые системами Morpeh.
*   Система Тумана Войны (Fog of War): Механика скрытия и открытия карты. Реализована через компоненты на сущностях, указывающие их видимость, и системы, управляющие состоянием ячеек карты в зависимости от видимости юнитов игрока.
*   Система Ресурсов (Resources): Сбор и управление ресурсами. Включает компоненты на источниках ресурсов и юнитах-сборщиках, а также системы, обрабатывающие взаимодействие и добавление ресурсов игроку.

Каждая из этих систем реализована как набор Morpeh `Components`, `Systems` и `Entities`, что обеспечивает модульность, тестируемость и высокую производительность.

## Настройка и Запуск

Для запуска проекта локально следуйте этим инструкциям:

1.  Требования:
    *   Установленный Unity Editor. Рекомендуется использовать версию, указанную в файле `ProjectSettings/ProjectVersion.txt`, или любую версию, совместимую с используемым пакетом Morpeh ECS.
    *   Установленный Git.
    *   Рекомендуется использовать IDE, такую как Visual Studio или VS Code, с соответствующими расширениями для Unity и C#.

2.  Клонирование репозитория:
    Откройте терминал или командную строку и выполните команду:
    ```bash
    git clone <URL_репозитория_проекта_QuantumStrikeMorpeh>
    ```
    Замените `<URL_репозитория_проекта_QuantumStrikeMorpeh>` на фактический URL репозитория на GitHub.

3.  Открытие проекта в Unity:
    *   Запустите Unity Hub.
    *   Нажмите кнопку "Add" (Добавить) и выберите папку, в которую вы клонировали репозиторий (`QuantumStrikeMorpeh`).
    *   Откройте проект в Unity Editor. Unity автоматически загрузит необходимые пакеты через Package Manager.

4.  Запуск главной сцены:
    *   В окне Project (Проект) найдите главную игровую сцену (обычно находится в папке `Assets/Scenes/`).
    *   Дважды кликните по файлу сцены, чтобы открыть ее в редакторе.
    *   Нажмите кнопку "Play" (Воспроизвести) в верхней части редактора Unity, чтобы запустить игру.

## Структура Проекта

Проект придерживается стандартной структуры Unity-проекта с организацией кода, ориентированной на ECS и Morpeh:

```
QuantumStrikeMorpeh/
├── Assets/
│   ├── Scripts/           # Основной код игры
│   │   ├── Game/          # Игровая логика
│   │   │   ├── ECS/       # Системы, компоненты и провайдеры Morpeh
│   │   │   │   ├── Components/ # Структуры данных для сущностей
│   │   │   │   ├── Systems/    # Логика обработки компонентов
│   │   │   │   ├── Providers/  # Монобехи для создания сущностей из сцены
│   │   │   │   └── ... (другие ECS-связанные папки)
│   │   │   └── ... (другие игровые скрипты)
│   │   └── ... (общие скрипты, утилиты)
│   ├── Scenes/            # Игровые сцены
│   ├── Prefabs/           # Префабы игровых объектов
│   └── ... (другие ассеты: графика, аудио, материалы и т.д.)
├── Packages/              # Пакеты Unity Package Manager (включая Morpeh)
├── ProjectSettings/       # Настройки проекта Unity
├── .gitignore             # Файл с правилами игнорирования Git
└── README.md              # Данный файл
```

Папка `Assets/Scripts/Game/ECS` содержит основную реализацию игровой логики с использованием Morpeh ECS, разделенную на `Components` (данные), `Systems` (логика) и `Providers` (монобехи для связывания GameObjects и ECS).

## Вклад (Contributing)

Приветствуется любой вклад в развитие проекта. Если вы хотите предложить улучшения, исправления ошибок или новые функции, пожалуйста:

1.  Сделайте форк репозитория.
2.  Создайте новую ветку для ваших изменений (`git checkout -b feature/your-feature`).
3.  Внесите изменения и закоммитьте их (`git commit -am 'Add some feature'`).
4.  Отправьте ветку на GitHub (`git push origin feature/your-feature`).
5.  Создайте Pull Request.

## Лицензия

[Укажите здесь тип лицензии, например, MIT License]

## Ссылки

*   GitHub Репозиторий: [Ссылка на GitHub репозиторий QuantumStrikeMorpeh]
*   Страница Портфолио: [https://dragonairdragon.github.io/QuantumStrike.html](https://dragonairdragon.github.io/QuantumStrike.html) (Раздел о проекте)
